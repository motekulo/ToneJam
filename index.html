<!doctype html>
<html>
	<head>
		<title>ToneJam</title>
		<script src="js/jquery.js"></script>
		<script src="js/jquery-ui.min.js"></script>
		<script src="js/nexusUI.js"></script>
		<script src="js/Tone4.js"></script>
		<script src="js/rack.js"></script>
		<meta charset="utf-8"></meta>
		<link href="css/style.css" rel="stylesheet" type="text/css"></link>
	</head>
	<body>

		<script>

			nx.onload = function() {
				nx.colorize("#0c7");
			//	ghost1.watch();
				nx.toDB = function(signal) {
					var DB = nx.scale(signal,0,1,-96,5)
					console.log(DB)
					return DB;
				}
			}

			$(function() {

				addShelf()

				$(".dragitem").draggable({
					helper: "clone"
				})
			})


			var dir = "audio/";
			var fileextension = ".mp3";
			$.ajax({
			    url: dir,
			    success: function (data) {
			        $(data).find("a:contains('" + fileextension + "')").each(function () {
			        		var file = this.href
			        		file = file.split("/")
			        		media.push(file[file.length-1])
			        });
			    }
			});






		</script>

		<header>ToneJam : An improvisational controller for Tone.js + NexusUI</header>

		<div id="shelves" style="width:2400px;overflow:auto">

			<div id="dragzone">

				<script>

					var pcount = 0;

					for (var key in Parts) {
						var cl = (pcount<6) ? "dragitem ugen" : "dragitem fx";
						document.write('<div class="'+cl+'">'+key+'</div>')
						pcount++
					}

				</script>

			</div>
<!--
			<div class="dropzone" id="dropzone1">

				<div id="racks"></div>

				<div class="emptyrack emptyugen">
					Signals
				</div>

				<div class="emptyrack emptyfx">
					FX
				</div>

			</div> -->


		</div>
<!--
		<canvas nx="ghost" style="position:fixed;bottom:0px;right:0px"></canvas> -->

	</body>
</html>