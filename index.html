<!doctype html>
<html>
	<head>
		<title>ToneJam</title>
		<script src="js/jquery.js"></script>
		<script src="js/jquery-ui.min.js"></script>
		<script src="js/nexusUI.js"></script>
		<script src="js/Tone4.js"></script>
		<script src="js/rack.js"></script>
		<link href="css/style.css" rel="stylesheet" type="text/css"></link>
	</head>
	<body>

		<script>

			nx.onload = function() {
				nx.colorize("#416");
			//	ghost1.watch();
			}

			$(function() {
				$(".dragitem").draggable({
					helper: "clone"
					//drag: function() {}
				})
				$(".dropzone").droppable({
					hoverClass: "rack-hover",
					drop: function( event, ui ) {
						addRack(ui.draggable[0].innerHTML,$(this).find("#racks")[0])
			       	//	$( this )
			        //	.find("#racks").append(ui.draggable[0].innerHTML)
			        }
				})
			})


			var dir = "audio/";
			var fileextension = ".mp3";
			$.ajax({
			    url: dir,
			    success: function (data) {
			        $(data).find("a:contains(" + fileextension + ")").each(function () {
			        		var file = this.href
			        		file = file.split("/")
			        		media.push(file[file.length-1])
			        });
			    }
			});






		</script>

		<div id="dragzone">

			<script>

				for (var key in Parts) {
					document.write('<div class="dragitem">'+key+'</div>')
				}

			</script>

		</div>

		<header>ToneJam : an improvisational controller for tone.js</header>

		<div class="dropzone" id="dropzone1">

			<div id="racks"></div>

			<div class="emptyrack">
			</div>

		</div>

		<div class="dropzone" id="dropzone2">

			<div id="racks"></div>

			<div class="emptyrack">
			</div>

		</div>
		
<!--
		<canvas nx="ghost" style="position:fixed;bottom:0px;right:0px"></canvas> -->

	</body>
</html>